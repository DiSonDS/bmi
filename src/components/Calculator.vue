<template>
  <BaseContainer>
    <ion-card>
      <ion-card-header>
        <ion-card-title>–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ò–Ω–¥–µ–∫—Å –ú–∞—Å—Å—ã –¢–µ–ª–∞ üî¢</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <div class="bmi-result" v-if="bmi">
          <ion-label><strong>–í–∞—à –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞: </strong></ion-label>
          <ion-label color="primary"><strong>{{ bmi }} –∫–≥/–º¬≤</strong></ion-label>
          <p>
            <ion-label color="primary">{{ bmiText }}</ion-label>
          </p>
        </div>
        <form @ionChange="onFormChange()">
          <ion-item>
            <ion-label position="floating">–†–æ—Å—Ç –≤ —Å–º</ion-label>
            <!-- Number type input -->
            <ion-input
              type="number"
              required
              min="0"
              :value="height"
              @input="height = $event.target.value"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">–í–µ—Å –≤ –∫–≥</ion-label>
            <!-- Number type input -->
            <ion-input
              type="number"
              required
              min="0"
              :value="weight"
              @input="weight = $event.target.value"
            ></ion-input>
          </ion-item>
        </form>
      </ion-card-content>
    </ion-card>

    <div class="bmi-table">
      <ion-grid>
        <ion-row>
          <ion-col> <b>–ò–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞</b> </ion-col>
          <ion-col>
            <b>–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –º–∞—Å—Å–æ–π —á–µ–ª–æ–≤–µ–∫–∞ –∏ –µ–≥–æ —Ä–æ—Å—Ç–æ–º</b>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col> 16 –∏ –º–µ–Ω–µ–µ </ion-col>
          <ion-col> –í—ã—Ä–∞–∂–µ–Ω–Ω—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç –º–∞—Å—Å—ã —Ç–µ–ª–∞ </ion-col>
        </ion-row>
        <ion-row>
          <ion-col> 16 ‚Äî 18,5 </ion-col>
          <ion-col> –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è (–¥–µ—Ñ–∏—Ü–∏—Ç) –º–∞—Å—Å–∞ —Ç–µ–ª–∞ </ion-col>
        </ion-row>
        <ion-row>
          <ion-col> 18,5 ‚Äî 25 </ion-col>
          <ion-col> –ù–æ—Ä–º–∞ </ion-col>
        </ion-row>
        <ion-row>
          <ion-col> 25 ‚Äî 30</ion-col>
          <ion-col> –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –º–∞—Å—Å–∞ —Ç–µ–ª–∞ (–ø—Ä–µ–¥–æ–∂–∏—Ä–µ–Ω–∏–µ) </ion-col>
        </ion-row>
        <ion-row>
          <ion-col> 30 ‚Äî 35 </ion-col>
          <ion-col> –û–∂–∏—Ä–µ–Ω–∏–µ </ion-col>
        </ion-row>
        <ion-row>
          <ion-col> 35 ‚Äî 40 </ion-col>
          <ion-col> –û–∂–∏—Ä–µ–Ω–∏–µ —Ä–µ–∑–∫–æ–µ </ion-col>
        </ion-row>
        <ion-row>
          <ion-col> 40 –∏ –±–æ–ª–µ–µ </ion-col>
          <ion-col> –û—á–µ–Ω—å —Ä–µ–∑–∫–æ–µ –æ–∂–∏—Ä–µ–Ω–∏–µ </ion-col>
        </ion-row>
      </ion-grid>
    </div>
    <div class="bmi-info">
      <a
        href="https://ru.wikipedia.org/wiki/%D0%98%D0%BD%D0%B4%D0%B5%D0%BA%D1%81_%D0%BC%D0%B0%D1%81%D1%81%D1%8B_%D1%82%D0%B5%D0%BB%D0%B0"
        target="_blank"
        rel="noopener"
        >–òÃÅ–Ω–¥–µ–∫—Å –º–∞ÃÅ—Å—Å—ã —Ç–µÃÅ–ª–∞ (–∞–Ω–≥–ª. body mass index (BMI), –ò–ú–¢)</a
      >
      ‚Äî –≤–µ–ª–∏—á–∏–Ω–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –æ—Ü–µ–Ω–∏—Ç—å —Å—Ç–µ–ø–µ–Ω—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–∞—Å—Å—ã —á–µ–ª–æ–≤–µ–∫–∞ –∏ –µ–≥–æ
      —Ä–æ—Å—Ç–∞ –∏ —Ç–µ–º —Å–∞–º—ã–º –∫–æ—Å–≤–µ–Ω–Ω–æ —Å—É–¥–∏—Ç—å –æ —Ç–æ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –º–∞—Å—Å–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π,
      –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –∏–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π. –í–∞–∂–µ–Ω –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø–æ–∫–∞–∑–∞–Ω–∏–π –¥–ª—è
      –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ª–µ—á–µ–Ω–∏—è.
    </div>
    <div class="bmi-formula">
      <p>
        –ò–ú–¢ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ: <strong>I = m / h¬≤</strong>,<br />
        –≥–¥–µ:<br />
        <b>m</b> ‚Äî –º–∞—Å—Å–∞ —Ç–µ–ª–∞ –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö<br />
        <b>h</b> ‚Äî —Ä–æ—Å—Ç –≤ –º–µ—Ç—Ä–∞—Ö, –∏ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –∫–≥/–º¬≤.
      </p>
    </div>
  </BaseContainer>
</template>

<script lang="ts">
import BaseContainer from "@/components/base/BaseContainer.vue";
import { ref } from "vue";

export default {
  name: "Calculator",
  setup() {
    const height = ref();
    const weight = ref();
    const bmi = ref();
    const bmiText = ref("");

    function onFormChange() {
      bmi.value = (weight.value / height.value ** 2) * 10000;
      if (bmi.value <= 16) {
        bmiText.value = "–í—ã—Ä–∞–∂–µ–Ω–Ω—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç –º–∞—Å—Å—ã —Ç–µ–ª–∞";
      } else if (bmi.value < 18.5) {
        bmiText.value = "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è (–¥–µ—Ñ–∏—Ü–∏—Ç) –º–∞—Å—Å–∞ —Ç–µ–ª–∞";
      } else if (bmi.value < 25) {
        bmiText.value = "–ù–æ—Ä–º–∞";
      } else if (bmi.value < 30) {
        bmiText.value = "–ò–∑–±—ã—Ç–æ—á–Ω–∞—è –º–∞—Å—Å–∞ —Ç–µ–ª–∞ (–ø—Ä–µ–¥–æ–∂–∏—Ä–µ–Ω–∏–µ)";
      } else if (bmi.value < 35) {
        bmiText.value = "–û–∂–∏—Ä–µ–Ω–∏–µ";
      } else if (bmi.value < 40) {
        bmiText.value = "–û–∂–∏—Ä–µ–Ω–∏–µ —Ä–µ–∑–∫–æ–µ";
      } else if (bmi.value >= 40) {
        bmiText.value = "–û—á–µ–Ω—å —Ä–µ–∑–∫–æ–µ –æ–∂–∏—Ä–µ–Ω–∏–µ";
      } else {
        bmiText.value = "";
      }
    }
    return { height, weight, bmi, bmiText, onFormChange };
  },
  components: {
    BaseContainer,
  },
};
</script>

<style scoped>
a {
  text-decoration: none;
}
.bmi-table,
.bmi-info,
.bmi-formula {
  margin-top: 1.5rem;
}
.bmi-result {
  text-align: center;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}
</style>